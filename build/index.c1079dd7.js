var e=globalThis,t={},n={},o=e.parcelRequire94c2;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var l={id:e,exports:{}};return t[e]=l,o.call(l.exports,l,l.exports),l.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire94c2=o),o.register;var l=o("kxgSl");async function a(){if(!(r=localStorage.getItem("jwtToken"))){alert("Bạn chưa đăng nhập. Vui lòng đăng nhập để sử dụng chức năng này."),window.location.href="/login";return}try{let e=await fetch(`https://${window.config.apiBaseUrl}/api/Export`,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!e.ok)throw alert("response is not ok!"),document.getElementById("errorMessage").textContent="Bạn không có quyền dùng chức năng này",Error("Không thể thực hiện yêu cầu xuất dữ liệu.");let t=await e.blob(),n=window.URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="ExcelDemo.xlsx",document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(n),window.location.href="/"}catch(e){console.error("Có lỗi xảy ra:",e.message)}}let d=1,r=localStorage.getItem("jwtToken");async function c(){let e=document.getElementById("filterOn").value;u(e,document.getElementById("filterQuery").value,document.getElementById("sortBy").value,document.getElementById("isAscending").value)}async function i(e){(d+=e)<1&&(d=1),c()}async function u(e=null,t=null,n=null,o=null){document.getElementById("errorMessage").textContent="";let l=`https://${window.config.apiBaseUrl}/api/Walks/GetAll`,a=[];a.push(`pageNumber=${encodeURIComponent(d)}`),a.push(`pageSize=${encodeURIComponent(5)}`),e&&t&&(a.push(`filterOn=${encodeURIComponent(e)}`),a.push(`filterQuery=${encodeURIComponent(t)}`)),n&&(a.push(`sortBy=${encodeURIComponent(n)}`),a.push(`isAscending=${encodeURIComponent(o)}`)),a.length>0&&(l+="?"+a.join("&")),console.log(l);try{let e=await fetch(l,{headers:{Authorization:`Bearer ${r}`}});if(e.ok){let t=await e.json();console.log("Fetched All Walks:",t),k(t)}else document.getElementById("errorMessage").textContent="Bạn không có quyền dùng chức năng này",alert("Response is not ok, please check fetchAllWalks"),console.error("Failed to fetch walks:",e.status)}catch(e){alert("Failed to load data, please check your connection with the backend"),console.error("Error fetching walks:",e)}}async function s(){let e=document.getElementById("addWalkForm");"none"===e.style.display||""===e.style.display?e.style.display="block":e.style.display="none"}async function m(e){try{let t=await fetch(`https://${window.config.apiBaseUrl}/api/Walks`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(e)});if(t.ok){let e=await t.json();console.log("Created Walk:",e),s(),g(e.id)}else document.getElementById("errorMessage").textContent="Bạn không có quyền dùng chức năng này",alert("response is not oke, check createWalk"),console.error("Failed to create walk:",t.status)}catch(e){alert("Load data failed, pls connection with your BE"),console.error("Error:",e)}}async function g(e){try{let t=await fetch(`https://${window.config.apiBaseUrl}/api/Walks/${e}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(t.ok){let e=await t.json();console.log("Fetched Walk by ID:",e),k([e])}else document.getElementById("errorMessage").textContent="Bạn không có quyền dùng chức năng này",console.error("Walk not found:",t.status)}catch(e){console.error("Error:",e)}}async function p(e){document.getElementById("updateForm").style.display="block",document.getElementById("updateWalkName").value=e.name,document.getElementById("updateDescription").value=e.description,document.getElementById("updateLength").value=String(e.lengthInKm).replace(",","."),document.getElementById("updateImageUrl").value=e.walkImageUrl,document.getElementById("updateDifficultyId").value=e.difficulty.id,document.getElementById("updateRegionId").value=e.region.id,document.getElementById("updateForm").dataset.walkId=e.id}async function h(e,t){try{let n=await fetch(`https://${window.config.apiBaseUrl}/api/Walks/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(t)});if(!n.ok)throw alert("Update failed - response not ok"),document.getElementById("errorMessage").textContent="Bạn không có quyền dùng chức năng này",Error("Failed to update walk");let o=await n.json();console.log("Updated Walk:",o),document.getElementById("updateForm").style.display="none",u()}catch(e){console.error("Error updating walk:",e)}}async function y(e){if(!window.confirm("Are you sure you want to delete this walk?")){console.log("Delete action was canceled");return}try{let t=await fetch(`https://${window.config.apiBaseUrl}/api/Walks/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});t.ok?(console.log("Deleted Walk with ID:",e),alert("Walk deleted successfully"),u()):(document.getElementById("errorMessage").textContent="Bạn không có quyền dùng chức năng này",alert("Failed to delete walk"),console.error("Failed to delete walk:",t.status))}catch(e){console.error("Error:",e)}}function k(e){let t=document.getElementById("result");t.innerHTML="";let n=document.createElement("table");n.innerHTML=`
    <tr>
      <th>Walk Name</th>
      <th>Description</th>
      <th>Length (km)</th>
      <th>Image URL</th>
      <th>Region Code</th>
      <th>Difficulty Name</th>
      <th>Action</th>
    </tr>
  `,e.forEach(e=>{let t=document.createElement("tr");t.innerHTML=`
      <td>${e.name}</td>
      <td>${e.description}</td>
      <td>${e.lengthInKm}</td>
      <td>${e.walkImageUrl}</td>
      <td>${e.region.code}</td>
      <td>${e.difficulty.name}</td>
    `;let o=document.createElement("td"),l=document.createElement("button"),a=document.createElement("button");l.textContent="Update",a.textContent="Delete",l.onclick=()=>p(e),a.onclick=()=>y(e.id),o.appendChild(l),o.appendChild(a),t.appendChild(o),n.appendChild(t)});let o=document.createElement("div");o.style.marginTop="10px";let l=document.createElement("button");l.id="previousBtn",l.textContent="Previous",l.onclick=()=>i(-1);let a=document.createElement("button");a.id="nextBtn",a.textContent="Next",a.onclick=()=>i(1),o.appendChild(l),o.appendChild(a),t.appendChild(n),t.appendChild(o)}r?console.log(r):(localStorage.removeItem("jwtToken"),window.location.href="/login"),localStorage.getItem("loginName")&&(document.getElementById("loginName").textContent=`Hello ${localStorage.getItem("loginName")}`);const I={pageNumber:d,pageSize:5,applyFilter:c,changePage:i,getAllWalks:u,toggleAddWalkForm:s,callCreateWalk:async function(){let e=document.getElementById("walkName").value,t=document.getElementById("walkDescription").value,n=parseFloat(document.getElementById("walkLength").value),o=document.getElementById("walkImageUrl").value;m({name:e,description:t,lengthInKm:n,walkImageUrl:o,difficultyId:document.getElementById("difficultyId").value,regionId:document.getElementById("regionId").value})},createWalk:m,callGetWalkById:async function(){let e=document.getElementById("walkId").value.trim();if(null===e){alert("You forgot to input the WalkId!!!");return}g(e)},getWalkById:g,showUpdateForm:p,submitUpdatedWalk:async function(){let e=document.getElementById("updateForm").dataset.walkId;if(!e){alert("Invalid Walk ID");return}h(e,{name:document.getElementById("updateWalkName").value,description:document.getElementById("updateDescription").value,lengthInKm:parseFloat(document.getElementById("updateLength").value),walkImageUrl:document.getElementById("updateImageUrl").value,difficultyId:document.getElementById("updateDifficultyId").value,regionId:document.getElementById("updateRegionId").value})},updateWalk:h,cancelUpdate:async function(){document.getElementById("updateForm").style.display="none"},deleteWalk:y,displayResult:k,logout:l.logout,exportExcel:a,jwtToken:r};Object.keys(I).forEach(e=>{window[e]=I[e]});
//# sourceMappingURL=index.c1079dd7.js.map
